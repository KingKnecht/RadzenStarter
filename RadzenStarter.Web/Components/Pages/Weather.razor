@page "/weather"
@attribute [StreamRendering(true)]
@* @attribute [OutputCache(Duration = 5)] *@
@rendermode InteractiveServer
@using Radzen
@using Radzen.Blazor
@inject WeatherApiClient WeatherApi


<PageTitle>Weather</PageTitle>

<RadzenText TextStyle="TextStyle.H3">Weather</RadzenText>

<p>This component demonstrates showing data loaded from a backend API service.</p>
<RadzenDataGrid Data="@Forecasts" TItem="WeatherForecast" AllowFiltering="true" AllowColumnResize="true" 
                AllowAlternatingRows="false" FilterMode="FilterMode.Advanced" AllowSorting="true" 
                AllowPaging="true" PageSize="5" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true">
	<Columns>
		<RadzenDataGridColumn TItem="WeatherForecast" Property="Date" Title="Date" Frozen="true" Width="160px">
			<Template Context="data">
				@data.Date.ToShortDateString()
			</Template>
		</RadzenDataGridColumn>
		<RadzenDataGridColumn TItem="WeatherForecast" Property="TemperatureC" Title="Temp. (C)" Width="140px" />
		<RadzenDataGridColumn TItem="WeatherForecast" Property="TemperatureF" Title="Temp. (F)" Width="140px" />
		<RadzenDataGridColumn TItem="WeatherForecast" Property="Summary" Title="Summary" />
	</Columns>
</RadzenDataGrid>

@code {

	public WeatherForecast[]? Forecasts { get; private set; }

	protected override async Task OnInitializedAsync()
	{
		Forecasts = await WeatherApi.GetWeatherAsync();
		await InvokeAsync(StateHasChanged);
	}
}